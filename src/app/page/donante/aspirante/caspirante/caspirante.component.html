<mat-toolbar color="primary" class="example-toolbar submenu">
    <div class="example-button-row">
      <button mat-flat-button class="btnHeader" routerLink="/page/donante/aspirante">
        <mat-icon class="maticon">west</mat-icon>
      </button>
      <button mat-flat-button class="btnHeader">
        <mat-icon class="maticon">save</mat-icon>
      </button>
    </div>
  </mat-toolbar>
  
  <div class="container">  
  <mat-card class="cardborde">   
    <mat-toolbar class="cardtitle"></mat-toolbar>

    <h2 *ngIf="id===0" class="title-label">CREAR POSTULANTE</h2>
    <h2 *ngIf="id!==0 && !edit" class="title-label">VER POSTULANTE</h2>
    <h2 *ngIf="id!==0 && edit" class="title-label">EDITAR POSTULANTE</h2>
    <mat-divider></mat-divider>

    <form id="ngForm" [formGroup]="form" #frmGrupo="ngForm" (ngSubmit)="guardar()" onKeyPress="if(event.keyCode == 13) event.returnValue = false;">
        <mat-stepper labelPosition="bottom" #stepper>
            <mat-step>
                <ng-template matStepLabel>Datos Principales</ng-template>

                <div class="content">
                    <div fxLayout="row-reverse wrap" fxLayoutGap="16px grid">
                        <div fxFlex="40%" fxFlex.xs="100%" fxFlex.sm="40%">                             
                            <mat-grid-list cols="12" rowHeight="232px" gutterSize="15px">
                                <mat-grid-tile *ngIf="muestraSangre && form.value['IdePersona']!==0" [colspan]="4">
                                    <mat-card style="margin-bottom: 1.34375em; text-align: center; background-color: {{colFondo}};">
                                        <mat-card-title style="color: {{colLetra}}!important;">
                                          {{abo}}
                                        </mat-card-title>
                                        <mat-card-subtitle style="color: {{colLetra}}!important;">
                                          {{rh}}
                                        </mat-card-subtitle>
                                      </mat-card>
                                </mat-grid-tile>
                                <mat-grid-tile *ngIf="muestraSangre && form.value['IdePersona']!==0" [colspan]="8">                                   
                                    <div>
                                        <div style="text-align:center;">
                                            <label style="text-align: center; color: #1a0da4; font-weight: 600;font-size:18px;">PE00000001</label>                                 
                                        </div>
                                        <img style="width: 201px;" src="{{foto}}" />
                                    </div> 
                                </mat-grid-tile>
                                <mat-grid-tile *ngIf="!muestraSangre || form.value['IdePersona']==0" [colspan]="12">                                   
                                    <div>
                                        <div style="text-align:center;">
                                            <label style="text-align: center; color: #1a0da4; font-weight: 600;font-size:18px;">PE00000001</label>                                 
                                        </div>
                                        <img style="width: 201px;" src="{{foto}}" />
                                    </div> 
                                </mat-grid-tile>
                            </mat-grid-list>

                            
                        </div>
                        <div fxFlex="60%" fxFlex.xs="100%" fxFlex.sm="60%">
                            <mat-form-field appearance="outline">
                                <mat-label>Código</mat-label>
                                <input matInput placeholder="Código" formControlName="Codigo">
                              </mat-form-field>
                            <mat-form-field appearance="outline">
                                <mat-select [disabled]="id>0" placeholder="Tipo de documento" formControlName="TipDocu" required>
                                  <mat-option *ngFor="let el of tbTipoDocu" [value]="el.codigo">
                                    {{el.descripcion}}
                                  </mat-option>              
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field appearance="outline">
                                <mat-label>Documento</mat-label>
                                <input #DOCUMENTO type="text" [readonly]="id>0" matInput placeholder="Documento" formControlName="NumDocu" minlength="1" maxlength="15" required (blur)="obtenerPersona($event)" (keydown)="obtenerPersonaEnter($event.keyCode)" >
                                <button *ngIf="DOCUMENTO.value && id===0" type="button" matSuffix mat-icon-button aria-label="Limpiar" (mouseup)="DOCUMENTO.value='';reiniciaPersona()">
                                  <mat-icon>close</mat-icon>
                                </button>
                                <button *ngIf="DOCUMENTO.value && id===0" type="button" matSuffix mat-icon-button aria-label="Buscar" (mouseup)="obtenerPersona($event)">
                                  <mat-icon>search</mat-icon>
                                </button>
                                <button type="button" matSuffix mat-icon-button aria-label="Buscar">
                                    <img style="width: 70px; margin-top: -16px;" src="{{lector}}" />
                                </button>
                              </mat-form-field>
                              <mat-form-field appearance="outline">
                                <mat-label>Apellido Paterno</mat-label>
                                <input matInput placeholder="Apellido Paterno" formControlName="ApPaterno" minlength="1" maxlength="100" required>
                              </mat-form-field>
                              <mat-form-field appearance="outline">
                                <mat-label>Apellido Materno</mat-label>
                                <input matInput placeholder="Apellido Materno" formControlName="ApMaterno" minlength="1" maxlength="100" required>
                              </mat-form-field>
                              <mat-form-field appearance="outline">
                                <mat-label>Nombres</mat-label>
                                <input matInput placeholder="Nombres" formControlName="Nombres" minlength="1" maxlength="100" required>
                              </mat-form-field>
                              <mat-form-field>
                                <mat-select placeholder="Género" formControlName="Sexo" required>
                                  <mat-option *ngFor="let el of tbGenero" [value]="el.codigo">
                                    {{el.descripcion}}
                                  </mat-option>              
                                </mat-select>
                              </mat-form-field>
                            <mat-grid-list cols="12" rowHeight="90px" gutterSize="15px">
                                <mat-grid-tile  [colspan]="7">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Fecha de nacimiento</mat-label>
                                        <input matInput [matDatepicker]="FecNacimiento" [min]="minDate" [max]="maxDate" placeholder="dd/mm/aaaa" formControlName="FecNacimiento" required>
                                        <mat-datepicker-toggle matSuffix [for]="FecNacimiento"></mat-datepicker-toggle>
                                        <mat-datepicker #FecNacimiento></mat-datepicker>
                                      </mat-form-field>
                                </mat-grid-tile>
                                <mat-grid-tile [colspan]="5">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Edad</mat-label>
                                        <input type="number" matInput placeholder="Edad" formControlName="Edad" minlength="1" maxlength="3" required>
                                    </mat-form-field>                                
                                </mat-grid-tile>
                            </mat-grid-list>
                            <mat-form-field>
                                <mat-select placeholder="Estado Civil" formControlName="EstadoCivil">
                                  <mat-option *ngFor="let el of tbEstCivil" [value]="el.codigo">
                                    {{el.descripcion}}
                                  </mat-option>              
                                </mat-select>
                              </mat-form-field>
                        </div>
                        
                    </div>
                </div>
                <div style="padding-top: 10px">
                    <!--button style="float: left" mat-button matStepperPrevious type="button">Atrás</button-->
                    <button style="float: right" mat-button matStepperNext type="button">Siguiente</button>
                  </div>
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>Datos Secundario</ng-template>

                <div class="content">
                    <div fxLayout="row wrap" fxLayoutGap="16px grid">
                        <div fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="50%">
                            <mat-form-field>
                                <mat-select placeholder="Nacionalidad" formControlName="Nacionalidad">
                                  <mat-option *ngFor="let el of tbNacion" [value]="el.codigo">
                                    {{el.descripcion}}
                                  </mat-option>              
                                </mat-select>
                              </mat-form-field>
                            <mat-form-field appearance="outline">
                                <mat-label>Lugar de Nacimiento</mat-label>
                                <input matInput placeholder="Lugar de Nacimiento" formControlName="LugarNac">
                            </mat-form-field>
                            <mat-form-field>
                                <mat-select placeholder="Estado Civil" formControlName="EstadoCivil">
                                  <mat-option *ngFor="let el of tbEstCivil" [value]="el.codigo">
                                    {{el.descripcion}}
                                  </mat-option>              
                                </mat-select>
                              </mat-form-field>
                              <mat-form-field>
                                <mat-select placeholder="Procedencia" formControlName="Procedencia" required>
                                  <mat-option *ngFor="let el of tbProced" [value]="el.codigo">
                                    {{el.descripcion}}
                                  </mat-option>              
                                </mat-select>
                              </mat-form-field>
                              <mat-form-field>
                                <mat-select placeholder="Grado de Instrucción" formControlName="CodGradoInstruccion">
                                  <mat-option *ngFor="let el of tbGraIns" [value]="el.codigo">
                                    {{el.descripcion}}
                                  </mat-option>              
                                </mat-select>
                              </mat-form-field>
                            <mat-form-field appearance="outline">
                                <mat-label>Ocupación</mat-label>
                                <mat-select >
                                  <mat-option></mat-option>  
                                </mat-select>
                            </mat-form-field> 
                            <mat-form-field appearance="outline">
                                <mat-label>Dirección</mat-label>
                                <input matInput placeholder="Direccion" formControlName="Direccion">
                            </mat-form-field>
                            <mat-form-field>
                                <mat-select placeholder="País" formControlName="CodPais" (selectionChange)="changePais($event.value)">
                                    <mat-option *ngFor="let el of tbPais" [value]="el.codigo">
                                    {{el.descripcion}}
                                    </mat-option>              
                                </mat-select>
                                </mat-form-field>
                            <mat-form-field *ngIf="muestraDistrito" [color]="distritoColor" minlength="1" maxlength="100">
                            <mat-label>Distrito</mat-label>
                            <input #DISTRITO type="text" matInput [formControl]="controlDistritos" [matAutocomplete]="auto">
                            <button *ngIf="DISTRITO.value" type="button" matSuffix mat-icon-button aria-label="Limpiar" (click)="DISTRITO.value=''">
                                <mat-icon>close</mat-icon>
                            </button>
                            <mat-autocomplete #auto="matAutocomplete" [displayWith]="mostrarDistrito" (optionSelected)="changeDistrito($event)">
                                <mat-option *ngFor="let el of filterDistritos | async" [value]="el">
                                {{el.dist!.descripcion}}, {{el.prov!.descripcion}}, {{el.dpto!.descripcion}}
                                </mat-option>
                            </mat-autocomplete>
                            </mat-form-field>
                            <mat-form-field appearance="outline" minlength="1" maxlength="50">
                                <mat-label>Celular</mat-label>
                                <input matInput placeholder="ej. +51 999999999" formControlName="Celular">
                              </mat-form-field>
                              <mat-form-field appearance="outline" minlength="1" maxlength="50">
                                <mat-label>Teléfono</mat-label>
                                <input matInput placeholder="ej. 9999999" formControlName="Telefono">
                              </mat-form-field>
                        </div>

                        <div fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="50%">
                            <mat-form-field appearance="outline" minlength="1" maxlength="50">
                                <mat-label>Correo</mat-label>
                                <input type="email" matInput placeholder="ej. ejemplo@correo.com" formControlName="Correo">
                              </mat-form-field>
                            <mat-form-field appearance="outline" minlength="1" maxlength="50">
                            <mat-label>Lugar de Trabajo</mat-label>
                            <input matInput placeholder="Lugar de Trabajo" formControlName="LugarTrabajo">
                            </mat-form-field>
                            <mat-form-field>
                                <mat-select #VIAJES placeholder="Viajes" formControlName="Viajes" required>
                                  <mat-option *ngFor="let el of tbViajes" [value]="el">
                                    {{el}}
                                  </mat-option>              
                                </mat-select>
                              </mat-form-field>
                            <div *ngIf="VIAJES.value === 'Sí'">

                            </div>
                            <mat-form-field appearance="outline">
                                <mat-label>Lugar</mat-label>
                                <input matInput placeholder="Lugar" formControlName="Lugar">
                            </mat-form-field>   
                            <mat-grid-tile  [colspan]="6">
                                <mat-form-field appearance="outline">
                                    <mat-label>Permanencia</mat-label>
                                    <input matInput placeholder="Permanencia" formControlName="Permanencia">
                                </mat-form-field>                       
                            </mat-grid-tile>
                            <mat-form-field appearance="outline">
                                <mat-label>Fecha de Viaje</mat-label>
                                <input matInput placeholder="Fecha de Viaje" formControlName="FechaViaje">
                            </mat-form-field>  
                            <mat-form-field appearance="outline">
                                <mat-label>Otros</mat-label>
                                <input matInput placeholder="Otros" formControlName="Otros">
                            </mat-form-field>                                                        
                        </div>
                    </div>
                </div>
                <div style="padding-top: 10px">
                    <button style="float: left" mat-button matStepperPrevious type="button">Atrás</button>
                    <button style="float: right" mat-button matStepperNext type="button">Siguiente</button>
                  </div>
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>Datos de la Donación</ng-template>

                <div class="content">
                    <mat-form-field *ngIf="tbOrigen.length > 0">
                        <mat-select placeholder="Banco Origen" formControlName="IdeOrigen" required>
                          <mat-option *ngFor="let el of tbOrigen" [value]="el.codigo">
                            {{el.descripcion}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field *ngIf="tbCampana.length > 0">
                        <mat-select placeholder="Campaña" formControlName="IdeCampania" required>
                          <mat-option *ngFor="let el of tbCampana" [value]="el.codigo">
                            {{el.descripcion}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-form-field appearance="outline">
                        <mat-label>Fecha</mat-label>
                        <input matInput [matDatepicker]="Fecha" [min]="minDate" [max]="maxDate" placeholder="dd/mm/aaaa" formControlName="Fecha" required>
                        <mat-datepicker-toggle matSuffix [for]="Fecha"></mat-datepicker-toggle>
                        <mat-datepicker #Fecha></mat-datepicker>
                      </mat-form-field>
                    <div fxLayout="row wrap" fxLayoutGap="16px grid">
                        <div fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="50%">
                            
                            <mat-form-field >
                                <mat-select placeholder="Tipo de Procedimiento" formControlName="CodTipoProcedimiento" required>
                                  <mat-option *ngFor="let el of tbTipoProced" [value]="el.codigo">
                                    {{el.descripcion}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <mat-form-field *ngIf="tbCampana.length > 0">
                                <mat-select placeholder="Tipo de Extracción" formControlName="CodTipoExtraccion" required>
                                  <mat-option *ngFor="let el of tbTipoExtrac" [value]="el.codigo">
                                    {{el.descripcion}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <mat-form-field *ngIf="tbCampana.length > 0">
                                <mat-select placeholder="Tipo de Donación" formControlName="CodTipoExtraccion" required>
                                  <mat-option *ngFor="let el of tbTipoDonac" [value]="el.codigo">
                                    {{el.descripcion}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            <mat-form-field appearance="outline">
                                <mat-label>Sangre</mat-label>
                                <mat-select >
                                  <mat-option></mat-option>  
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="50%">
                            <mat-label>
                                Datos del paciente
                            </mat-label>
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile  [colspan]="6">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Documento</mat-label>
                                        <mat-select >
                                          <mat-option></mat-option>  
                                        </mat-select>
                                    </mat-form-field>                                                             
                                </mat-grid-tile>

                                <mat-grid-tile [colspan]="6">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Nro</mat-label>
                                        <input matInput placeholder="Código" formControlName="Codigo">
                                    </mat-form-field>                            
                                </mat-grid-tile>
                            </mat-grid-list>

                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile  [colspan]="6">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Apellido Paterno</mat-label>
                                        <input matInput placeholder="Código" formControlName="Codigo">
                                    </mat-form-field>                                                              
                                </mat-grid-tile>

                                <mat-grid-tile [colspan]="6">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Apellido Materno</mat-label>
                                        <input matInput placeholder="Código" formControlName="Codigo">
                                    </mat-form-field>                            
                                </mat-grid-tile>
                            </mat-grid-list>

                            <mat-form-field appearance="outline">
                                <mat-label>Nombre</mat-label>
                                <input matInput placeholder="Código" formControlName="Codigo">
                            </mat-form-field> 
                            <mat-form-field appearance="outline">
                                <mat-label>Eje - Procede</mat-label>
                                <input matInput placeholder="Código" formControlName="Codigo">
                            </mat-form-field> 
                            <mat-form-field appearance="outline">
                                <mat-label>Vinculo</mat-label>
                                <mat-select >
                                  <mat-option></mat-option>  
                                </mat-select>
                            </mat-form-field>  
                            <mat-form-field appearance="outline">
                                <mat-label>Tipo</mat-label>
                                <mat-select >
                                  <mat-option></mat-option>  
                                </mat-select>
                            </mat-form-field>  

                            
                        </div>

                    </div>
                </div>
                <div style="padding-top: 10px">
                    <button style="float: left" mat-button matStepperPrevious type="button">Atrás</button>
                    <!--button style="float: right" mat-button matStepperNext type="button">Siguiente</button-->
                </div>
            </mat-step>

        </mat-stepper>
    </form>
   
  </mat-card>
  </div>
  